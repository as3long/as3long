define("#base/1.0.0/aspect",[],function(e,t){function r(e,t,r,o){var u=t.split(n),a,f;while(a=u.shift())f=i(this,a),f.__isAspected||s.call(this,a),this.on(e+":"+a,r,o);return this}function i(e,t){var n=e[t];if(!n)throw new Error("Invalid method name: "+t);return n}function s(e){var t=this[e];this[e]=function(){var n=Array.prototype.slice.call(arguments),r=["before:"+e].concat(n);this.trigger.apply(this,r);var i=t.apply(this,arguments);return this.trigger("after:"+e,i),i},this[e].__isAspected=!0}t.before=function(e,t,n){return r.call(this,"before",e,t,n)},t.after=function(e,t,n){return r.call(this,"after",e,t,n)};var n=/\s+/}),define("#base/1.0.0/attribute",[],function(e,t){function i(e){return n.call(e)==="[object String]"}function s(e){return n.call(e)==="[object Function]"}function o(e){return e&&n.call(e)==="[object Object]"&&"isPrototypeOf"in e}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e,t){var n,i;for(n in t)if(t.hasOwnProperty(n)){i=t[n];if(r(i))i=i.slice();else if(o(i)){var s=e[n];o(s)||(s={}),i=a(s,i)}e[n]=i}return e}function l(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var n=[],r=e.constructor.prototype;while(r)r.hasOwnProperty("attrs")||(r.attrs={}),h(t,r.attrs,r),u(r.attrs)||n.unshift(r.attrs),r=r.constructor.superclass;var i={};for(var s=0,o=n.length;s<o;s++)i=a(i,w(n[s]));return i}function h(e,t,n,r){for(var i=0,s=e.length;i<s;i++){var o=e[i];n.hasOwnProperty(o)&&(t[o]=r?t.get(o):n[o])}}function v(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r="_onChange"+l(n);e[r]&&e.on("change:"+n,e[r])}}function m(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n].value,i;s(r)&&(i=n.match(p))&&(e[i[1]](g(i[2]),r),delete t[n])}}function g(e){var t=e.match(d),n=t[1]?"change:":"";return n+=t[2].toLowerCase()+t[3],n}function y(e,t,n){var r={silent:!0};e.__initializingAttrs=!0;for(var i in n)n.hasOwnProperty(i)&&t[i].setter&&e.set(i,n[i].value,r);delete e.__initializingAttrs}function w(e){e=a({},e);for(var t in e){var n=e[t];if(o(n)&&E(n,b))continue;e[t]={value:n}}return e}function E(e,t){for(var n=0,r=t.length;n<r;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function S(e){return e==null||(i(e)||r(e))&&e.length===0||o(e)&&u(e)}function x(e,t){if(e===t)return!0;if(S(e)&&S(t))return!0;var r=n.call(e);if(r!=n.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase;case"[object Array]":var i=e.toString(),s=t.toString();return i.indexOf("[object")===-1&&s.indexOf("[object")===-1&&i===s}if(typeof e!="object"||typeof t!="object")return!1;if(o(e)&&o(t)){if(!x(f(e),f(t)))return!1;for(var u in e)if(e[u]!==t[u])return!1;return!0}return!1}t.initAttrs=function(e,t){t&&(e=e?a(t,e):t);var n=this.propsInAttrs||[],r,i,s;i=c(this,n),r=a({},i),e&&(s=w(e),a(r,s)),v(this,r),this.attrs=r,y(this,r,s),m(this,r),h(n,this,this.attrs,!0)},t.get=function(e){var t=this.attrs[e]||{},n=t.value;return t.getter?t.getter.call(this,n,e):n},t.set=function(e,t,n){var r={};i(e)?r[e]=t:(r=e,n=t),n||(n={});var s=n.silent,u=this.attrs,f=this.__changedAttrs||(this.__changedAttrs={});for(e in r){if(!r.hasOwnProperty(e))continue;var l=u[e]||(u[e]={});t=r[e];if(l.readOnly)throw new Error("This attribute is readOnly: "+e);l.setter&&(t=l.setter.call(this,t,e));var c=this.get(e);o(c)&&o(t)&&(t=a(a({},c),t)),u[e].value=t,!this.__initializingAttrs&&!x(c,t)&&(s?f[e]=[t,c]:this.trigger("change:"+e,t,c,e))}return this},t.change=function(){var e=this.__changedAttrs;if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.trigger("change:"+t,n[0],n[1],t)}delete this.__changedAttrs}return this};var n=Object.prototype.toString,r=Array.isArray||function(e){return n.call(e)==="[object Array]"},f=Object.keys;f||(f=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var p=/^(on|before|after)([A-Z].*)$/,d=/^(Change)?([A-Z])(.*)/,b=["value","getter","setter","readOnly"]}),define("#base/1.0.0/base",["./aspect","./attribute","#class/1.0.0/class","#events/1.0.0/events"],function(e,t,n){var r=e("#class/1.0.0/class"),i=e("#events/1.0.0/events"),s=e("./aspect"),o=e("./attribute");n.exports=r.create({Implements:[i,s,o],initialize:function(e){this.initAttrs(e)},destroy:function(){this.off();for(var e in this)this.hasOwnProperty(e)&&delete this[e]}})});